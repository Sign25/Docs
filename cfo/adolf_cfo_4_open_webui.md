---
title: "–†–∞–∑–¥–µ–ª 4: Open WebUI"
mode: "wide"
---

**–ü—Ä–æ–µ–∫—Ç:** –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—á—ë—Ç –∏ —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞  
**–ú–æ–¥—É–ª—å:** CFO  
**–í–µ—Ä—Å–∏—è:** 1.1  
**–î–∞—Ç–∞:** –§–µ–≤—Ä–∞–ª—å 2026

---

## 4.1 –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–†–∞–∑–¥–µ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–¥—É–ª—è CFO –≤ Open WebUI. –ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **dashboard-first** –ø–æ–¥—Ö–æ–¥: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–¥–∏—Ä–µ–∫—Ç–æ—Ä) –≤–∏–¥–∏—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ —Å KPI-–º–µ—Ç—Ä–∏–∫–∞–º–∏, –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ –∫–∞—Ç–∞–ª–æ–≥–æ–º –≥–æ—Ç–æ–≤—ã—Ö –æ—Ç—á—ë—Ç–æ–≤ ‚Äî –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –ò–ò. –ß–∞—Ç —Å –ò–ò –¥–æ—Å—Ç—É–ø–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω Open WebUI.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ v1.0

| –ê—Å–ø–µ–∫—Ç | v1.0 (–±—ã–ª–æ) | v1.1 (—Å—Ç–∞–ª–æ) |
|--------|-------------|--------------|
| –ü–∞—Ä–∞–¥–∏–≥–º–∞ | Chat-first: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –∑–∞–ø—Ä–æ—Å | Dashboard-first: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∏–∑ –≥–æ—Ç–æ–≤—ã—Ö –æ—Ç—á—ë—Ç–æ–≤ |
| –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ | Pipeline \`@Adolf_CFO\` –≤ —á–∞—Ç–µ | Launcher-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ \`/apps/cfo\` —Å KPI –∏ –±–∞–Ω–Ω–µ—Ä–∞–º–∏ |
| –ù–∞–≤–∏–≥–∞—Ü–∏—è | –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã + –∫–Ω–æ–ø–∫–∏ | –í–∏–∑—É–∞–ª—å–Ω—ã–µ –±–∞–Ω–Ω–µ—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º |
| –ì—Ä–∞—Ñ–∏–∫–∏ | –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç | shadcn/ui Charts (Recharts) |
| –î–∞–Ω–Ω—ã–µ 1–° | –¢–æ–ª—å–∫–æ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å | 13 –≤—ã–≥—Ä—É–∑–æ–∫: –æ—Å—Ç–∞—Ç–∫–∏, –æ—Ç–≥—Ä—É–∑–∫–∏, –≤–æ–∑–≤—Ä–∞—Ç—ã, –ø—Ä–∏–±—ã–ª—å |
| –ß–∞—Ç —Å –ò–ò | –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –û—Ç–¥–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª (–≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω Open WebUI) |

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| KPI Header | –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª—è–µ–º—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ |
| Banner Grid | –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–∞–Ω–Ω–µ—Ä—ã –≥–æ—Ç–æ–≤—ã—Ö –æ—Ç—á—ë—Ç–æ–≤ |
| Result Page | –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∏ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ |
| Charts | shadcn/ui Charts (Recharts) –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç—Ä–µ–Ω–¥–æ–≤ |
| Pipeline | \`@Adolf_CFO\` ‚Äî —á–∞—Ç-–∞–≥–µ–Ω—Ç –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ |

---

## 4.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### 4.2.1 –û–±—â–∞—è —Å—Ö–µ–º–∞

```mermaid
flowchart TB
    subgraph ENTRY["–¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞"]
        SIDEBAR["Sidebar ‚Üí CFO"]
        MAIN["–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω<br/>Open WebUI"]
    end

    subgraph CFO_UI["CFO Interface"]
        DASHBOARD["Dashboard Page<br/>/apps/cfo"]
        RESULT["Result Page<br/>/apps/cfo/result"]
        CHAT["Chat —Å @Adolf_CFO<br/>(–≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω)"]
    end

    subgraph DASHBOARD_PARTS["–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Dashboard"]
        KPI["KPI Header<br/>6 –∫–∞—Ä—Ç–æ—á–µ–∫ –º–µ—Ç—Ä–∏–∫"]
        BANNERS["Banner Grid<br/>6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π"]
    end

    subgraph BACKEND["Backend"]
        API["Launcher API"]
        EXECUTOR["CFO Executors"]
        PIPELINE["CFO Pipeline"]
    end

    subgraph DATA["–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö"]
        PG["PostgreSQL<br/>cfo_* —Ç–∞–±–ª–∏—Ü—ã"]
        CSV_1C["CSV –∏–∑ 1–°<br/>13 –≤—ã–≥—Ä—É–∑–æ–∫"]
        MP_API["API –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤"]
    end

    SIDEBAR -->|"–ö–ª–∏–∫"| DASHBOARD
    MAIN -->|"@Adolf_CFO"| CHAT

    DASHBOARD --> KPI
    DASHBOARD --> BANNERS

    KPI -->|"GET /api/cfo/kpi"| API
    BANNERS -->|"POST /api/launcher/execute"| API
    CHAT -->|"Pipeline"| PIPELINE

    API --> EXECUTOR
    EXECUTOR --> PG
    PIPELINE --> PG

    CSV_1C -->|"ETL"| PG
    MP_API -->|"Celery"| PG
```

### 4.2.2 –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫

```mermaid
sequenceDiagram
    participant U as Director
    participant D as Dashboard /apps/cfo
    participant A as Launcher API
    participant R as Result Page

    U->>D: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç CFO –∏–∑ sidebar
    D->>A: GET /api/cfo/kpi
    A-->>D: KPI-–º–µ—Ç—Ä–∏–∫–∏
    D->>U: –î–∞—à–±–æ—Ä–¥: KPI + –±–∞–Ω–Ω–µ—Ä—ã

    U->>D: –ö–ª–∏–∫ –ø–æ –±–∞–Ω–Ω–µ—Ä—É "P&L –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º"
    D->>A: POST /api/launcher/execute
    A-->>R: –î–∞–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç–∞
    R->>U: –¢–∞–±–ª–∏—Ü–∞ + –≥—Ä–∞—Ñ–∏–∫ + –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π

    U->>R: –ö–ª–∏–∫ "–ù–∞–∑–∞–¥"
    R->>D: –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –¥–∞—à–±–æ—Ä–¥
```

### 4.2.3 –ß–∞—Ç —Å –ò–ò ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫

–î–ª—è —Å–≤–æ–±–æ–¥–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω Open WebUI, –≤—ã–±–∏—Ä–∞—è Pipeline \`@Adolf_CFO\`. –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ 4.8.

---

## 4.3 KPI Dashboard Header

–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã \`/apps/cfo\` –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª—è–µ–º—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫. –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ endpoint \`GET /api/cfo/kpi\`.

### 4.3.1 –°–æ—Å—Ç–∞–≤ KPI-–∫–∞—Ä—Ç–æ—á–µ–∫

| # | –ú–µ—Ç—Ä–∏–∫–∞ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –î–µ–ª—å—Ç–∞ |
|:-:|---------|----------|--------|
| 1 | –í—ã—Ä—É—á–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é | \`cfo_pnl_daily\` | vs –ø—Ä–æ—à–ª–∞—è –Ω–µ–¥–µ–ª—è |
| 2 | –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å | \`cfo_pnl_daily\` | vs –ø—Ä–æ—à–ª–∞—è –Ω–µ–¥–µ–ª—è |
| 3 | –°—Ä–µ–¥–Ω—è—è –º–∞—Ä–∂–∞ | \`cfo_pnl_daily\` | vs –ø—Ä–æ—à–ª–∞—è –Ω–µ–¥–µ–ª—è (–ø.–ø.) |
| 4 | –£–±—ã—Ç–æ—á–Ω—ã–µ SKU | \`cfo_abc_results\` (class D) | vs –ø—Ä–æ—à–ª–∞—è –Ω–µ–¥–µ–ª—è |
| 5 | –û—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö | \`stock_balance\` (1–°) | –∫–æ–ª-–≤–æ –µ–¥–∏–Ω–∏—Ü |
| 6 | –û—Ç–≥—Ä—É–∑–∫–∏ —Å–µ–≥–æ–¥–Ω—è | \`orders_shipped\` (1–°) | –∫–æ–ª-–≤–æ –µ–¥–∏–Ω–∏—Ü |

### 4.3.2 API Endpoint

```
GET /api/cfo/kpi
Authorization: Bearer {token}
```

**Response:**

```json
{
  "period": "2026-02-07 ‚Äî 2026-02-13",
  "metrics": [
    {
      "id": "revenue",
      "label": "–í—ã—Ä—É—á–∫–∞",
      "value": 5250000,
      "formatted": "5 250 000 ‚ÇΩ",
      "delta": 12.3,
      "delta_label": "+12.3% –∫ –ø—Ä–µ–¥. –Ω–µ–¥",
      "trend": "up",
      "icon": "trending-up"
    },
    {
      "id": "profit",
      "label": "–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å",
      "value": 2238900,
      "formatted": "2 238 900 ‚ÇΩ",
      "delta": 8.1,
      "delta_label": "+8.1% –∫ –ø—Ä–µ–¥. –Ω–µ–¥",
      "trend": "up",
      "icon": "wallet"
    },
    {
      "id": "margin",
      "label": "–°—Ä–µ–¥–Ω—è—è –º–∞—Ä–∂–∞",
      "value": 42.6,
      "formatted": "42.6%",
      "delta": 1.2,
      "delta_label": "+1.2 –ø.–ø.",
      "trend": "up",
      "icon": "percent"
    },
    {
      "id": "loss_makers",
      "label": "–£–±—ã—Ç–æ—á–Ω—ã—Ö SKU",
      "value": 5,
      "formatted": "5",
      "delta": -2,
      "delta_label": "-2 –∫ –ø—Ä–µ–¥. –Ω–µ–¥",
      "trend": "down",
      "icon": "alert-triangle"
    },
    {
      "id": "stock",
      "label": "–û—Å—Ç–∞—Ç–∫–∏",
      "value": 12450,
      "formatted": "12 450 —à—Ç",
      "delta": null,
      "delta_label": "–Ω–∞ —Å–∫–ª–∞–¥–∞—Ö",
      "trend": "neutral",
      "icon": "package"
    },
    {
      "id": "shipments",
      "label": "–û—Ç–≥—Ä—É–∑–∫–∏",
      "value": 340,
      "formatted": "340 —à—Ç",
      "delta": null,
      "delta_label": "—Å–µ–≥–æ–¥–Ω—è",
      "trend": "neutral",
      "icon": "truck"
    }
  ]
}
```

### 4.3.3 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç KPI Card

–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –±–∞–∑–µ shadcn/ui Card. –ò–∫–æ–Ω–∫–∏: Lucide. –¶–≤–µ—Ç –¥–µ–ª—å—Ç—ã: \`--success\` –¥–ª—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö, \`--destructive\` –¥–ª—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö, \`--muted-foreground\` –¥–ª—è –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã—Ö.

### 4.3.4 Backend —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

```python
# executors/launcher/cfo_kpi.py

async def get_kpi(user: dict) -> dict:
    """KPI-–º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞ CFO."""

    current = await pnl_service.get_summary(
        date_from=week_start(), date_to=yesterday()
    )
    previous = await pnl_service.get_summary(
        date_from=prev_week_start(), date_to=prev_week_end()
    )
    loss_count = await abc_service.count_class_d(
        date_from=week_start(), date_to=yesterday()
    )
    stock = await stock_service.get_total_balance()
    shipments = await stock_service.get_today_shipments()

    return {
        "period": f"{week_start()} ‚Äî {yesterday()}",
        "metrics": [
            build_metric("revenue", "–í—ã—Ä—É—á–∫–∞", current.revenue,
                         delta_pct(current.revenue, previous.revenue)),
            build_metric("profit", "–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å", current.net_profit,
                         delta_pct(current.net_profit, previous.net_profit)),
            build_metric("margin", "–°—Ä–µ–¥–Ω—è—è –º–∞—Ä–∂–∞", current.avg_margin,
                         current.avg_margin - previous.avg_margin),
            build_metric("loss_makers", "–£–±—ã—Ç–æ—á–Ω—ã—Ö SKU", loss_count.current,
                         loss_count.current - loss_count.previous),
            build_metric("stock", "–û—Å—Ç–∞—Ç–∫–∏", stock.total_qty, None),
            build_metric("shipments", "–û—Ç–≥—Ä—É–∑–∫–∏", shipments.today_qty, None),
        ]
    }
```

---

## 4.4 –ö–∞—Ç–∞–ª–æ–≥ –±–∞–Ω–Ω–µ—Ä–æ–≤

–ü–æ–¥ KPI-—à–∞–ø–∫–æ–π —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è —Å–µ—Ç–∫–∞ –±–∞–Ω–Ω–µ—Ä–æ–≤, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º. –ö–∞–∂–¥—ã–π –±–∞–Ω–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π –æ—Ç—á—ë—Ç —á–µ—Ä–µ–∑ \`POST /api/launcher/execute\`. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç [Launcher Core 3.1](/core/adolf_core_3_1_launcher).

### 4.4.1 –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –±–∞–Ω–Ω–µ—Ä—ã

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è 1: P&L –æ—Ç—á—ë—Ç—ã**

| Banner ID | –ó–∞–≥–æ–ª–æ–≤–æ–∫ | –ò–∫–æ–Ω–∫–∞ | –î–æ—Å—Ç—É–ø | Action |
|-----------|-----------|--------|--------|--------|
| \`pnl_category\` | P&L –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º | \`folder-bar-chart\` | Senior+ | \`cfo.pnl_category\` |
| \`pnl_brand\` | P&L –ø–æ –±—Ä–µ–Ω–¥–∞–º | \`tags\` | Senior+ | \`cfo.pnl_brand\` |
| \`pnl_marketplace\` | P&L –ø–æ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º | \`store\` | Senior+ | \`cfo.pnl_marketplace\` |
| \`pnl_sku\` | P&L –ø–æ SKU | \`barcode\` | Director+ | \`cfo.pnl_sku\` |
| \`pnl_consolidated\` | –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π P&L | \`file-bar-chart\` | Director+ | \`cfo.pnl_consolidated\` |

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è 2: –¢–æ–≤–∞—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑**

| Banner ID | –ó–∞–≥–æ–ª–æ–≤–æ–∫ | –ò–∫–æ–Ω–∫–∞ | –î–æ—Å—Ç—É–ø | Action |
|-----------|-----------|--------|--------|--------|
| \`abc_analysis\` | ABC-–∞–Ω–∞–ª–∏–∑ | \`bar-chart-3\` | Senior+ | \`cfo.abc_analysis\` |
| \`loss_makers\` | –£–±—ã—Ç–æ—á–Ω—ã–µ SKU | \`alert-triangle\` | Senior+ | \`cfo.loss_makers\` |
| \`top_profitable\` | –¢–æ–ø –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö | \`trophy\` | Senior+ | \`cfo.top_profitable\` |

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è 3: –î–∏–Ω–∞–º–∏–∫–∞ (–≥—Ä–∞—Ñ–∏–∫–∏)**

| Banner ID | –ó–∞–≥–æ–ª–æ–≤–æ–∫ | –ò–∫–æ–Ω–∫–∞ | Badge | Action |
|-----------|-----------|--------|-------|--------|
| \`chart_revenue\` | –î–∏–Ω–∞–º–∏–∫–∞ –≤—ã—Ä—É—á–∫–∏ | \`trending-up\` | ‚Äî | \`cfo.chart_revenue\` |
| \`chart_margin\` | –î–∏–Ω–∞–º–∏–∫–∞ –º–∞—Ä–∂–∏ | \`activity\` | ‚Äî | \`cfo.chart_margin\` |
| \`chart_compare\` | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤ | \`git-compare-arrows\` | ‚Äî | \`cfo.chart_compare\` |

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è 4: –°–∫–ª–∞–¥ –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∞**

| Banner ID | –ó–∞–≥–æ–ª–æ–≤–æ–∫ | –ò–∫–æ–Ω–∫–∞ | –ò—Å—Ç–æ—á–Ω–∏–∫ 1–° | Action |
|-----------|-----------|--------|-------------|--------|
| \`stock_balance\` | –û—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö | \`package\` | \`stock_balance\` (–µ–∂–µ–¥–Ω.) | \`cfo.stock_balance\` |
| \`shipments\` | –û—Ç–≥—Ä—É–∑–∫–∏ –Ω–∞ –ú–ü | \`truck\` | \`orders_shipped\` (–µ–∂–µ–¥–Ω.) | \`cfo.shipments\` |
| \`returns\` | –í–æ–∑–≤—Ä–∞—Ç—ã | \`undo-2\` | \`returns_register\` (–µ–∂–µ–Ω–µ–¥.) | \`cfo.returns\` |
| \`inventory_value\` | –û—Ü–µ–Ω–∫–∞ –∑–∞–ø–∞—Å–æ–≤ | \`warehouse\` | \`inventory_valuation\` (–µ–∂–µ–º–µ—Å.) | \`cfo.inventory_value\` |

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è 5: –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å**

| Banner ID | –ó–∞–≥–æ–ª–æ–≤–æ–∫ | –ò–∫–æ–Ω–∫–∞ | –ò—Å—Ç–æ—á–Ω–∏–∫ 1–° | Action |
|-----------|-----------|--------|-------------|--------|
| \`cost_by_sku\` | –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ SKU | \`calculator\` | \`cost_prices\` (–µ–∂–µ–Ω–µ–¥.) | \`cfo.cost_by_sku\` |
| \`supplier_prices\` | –¶–µ–Ω—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ | \`receipt\` | \`suppliers_prices\` (–µ–∂–µ–Ω–µ–¥.) | \`cfo.supplier_prices\` |
| \`cost_dynamics\` | –î–∏–Ω–∞–º–∏–∫–∞ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ | \`chart-line\` | \`cost_prices\` (–∏—Å—Ç–æ—Ä–∏—è) | \`cfo.cost_dynamics\` |

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è 6: AI-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞**

| Banner ID | –ó–∞–≥–æ–ª–æ–≤–æ–∫ | –ò–∫–æ–Ω–∫–∞ | Badge | Action |
|-----------|-----------|--------|-------|--------|
| \`ai_digest\` | AI-–¥–∞–π–¥–∂–µ—Å—Ç –∑–∞ –Ω–µ–¥–µ–ª—é | \`sparkles\` | AI | \`cfo.ai_digest\` |
| \`ai_chat\` | –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å CFO | \`message-square\` | ‚Äî | \`cfo.ai_chat\` (redirect ‚Üí chat) |

### 4.4.2 JSON-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–§–∞–π–ª: \`/config/launcher/cfo.json\`

```json
{
  "module": "cfo",
  "version": "1.1",
  "title": "–§–∏–Ω–∞–Ω—Å—ã",
  "description": "–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å",
  "icon": "line-chart",
  "kpi_endpoint": "/api/cfo/kpi",
  "categories": [
    {
      "id": "pnl",
      "title": "P&L –æ—Ç—á—ë—Ç—ã",
      "banners": [
        {
          "id": "pnl_category",
          "title": "P&L –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º",
          "description": "–ü—Ä–∏–±—ã–ª—å –∏ —É–±—ã—Ç–∫–∏ –≤ —Ä–∞–∑—Ä–µ–∑–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤",
          "icon": "folder-bar-chart",
          "action": "cfo.pnl_category",
          "enabled": true,
          "badge": null
        },
        {
          "id": "pnl_brand",
          "title": "P&L –ø–æ –±—Ä–µ–Ω–¥–∞–º",
          "description": "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –û—Ö–∞–Ω–∞ –ú–∞—Ä–∫–µ—Ç –∏ –û—Ö–∞–Ω–∞ –ö–∏–¥—Å",
          "icon": "tags",
          "action": "cfo.pnl_brand",
          "enabled": true,
          "badge": null
        },
        {
          "id": "pnl_marketplace",
          "title": "P&L –ø–æ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º",
          "description": "Wildberries vs Ozon vs –Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç",
          "icon": "store",
          "action": "cfo.pnl_marketplace",
          "enabled": true,
          "badge": null
        },
        {
          "id": "pnl_sku",
          "title": "P&L –ø–æ SKU",
          "description": "–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ –∫–∞–∂–¥–æ–≥–æ –∞—Ä—Ç–∏–∫—É–ª–∞",
          "icon": "barcode",
          "action": "cfo.pnl_sku",
          "enabled": true,
          "badge": null,
          "min_role": "director"
        },
        {
          "id": "pnl_consolidated",
          "title": "–ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π P&L",
          "description": "–û–±—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∞ –ø–æ –≤—Å–µ–º—É –±–∏–∑–Ω–µ—Å—É",
          "icon": "file-bar-chart",
          "action": "cfo.pnl_consolidated",
          "enabled": true,
          "badge": null,
          "min_role": "director"
        }
      ]
    },
    {
      "id": "product_analysis",
      "title": "–¢–æ–≤–∞—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑",
      "banners": [
        {
          "id": "abc_analysis",
          "title": "ABC-–∞–Ω–∞–ª–∏–∑",
          "description": "–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è SKU –ø–æ –≤–∫–ª–∞–¥—É –≤ –ø—Ä–∏–±—ã–ª—å",
          "icon": "bar-chart-3",
          "action": "cfo.abc_analysis",
          "enabled": true,
          "badge": null
        },
        {
          "id": "loss_makers",
          "title": "–£–±—ã—Ç–æ—á–Ω—ã–µ SKU",
          "description": "–ü–æ–∑–∏—Ü–∏–∏ —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π –º–∞—Ä–∂–æ–π",
          "icon": "alert-triangle",
          "action": "cfo.loss_makers",
          "enabled": true,
          "badge": null
        },
        {
          "id": "top_profitable",
          "title": "–¢–æ–ø –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö",
          "description": "–õ–∏–¥–µ—Ä—ã –ø–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ–π –ø—Ä–∏–±—ã–ª–∏",
          "icon": "trophy",
          "action": "cfo.top_profitable",
          "enabled": true,
          "badge": null
        }
      ]
    },
    {
      "id": "dynamics",
      "title": "–î–∏–Ω–∞–º–∏–∫–∞",
      "banners": [
        {
          "id": "chart_revenue",
          "title": "–î–∏–Ω–∞–º–∏–∫–∞ –≤—ã—Ä—É—á–∫–∏",
          "description": "–ì—Ä–∞—Ñ–∏–∫ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π",
          "icon": "trending-up",
          "action": "cfo.chart_revenue",
          "enabled": true,
          "badge": null
        },
        {
          "id": "chart_margin",
          "title": "–î–∏–Ω–∞–º–∏–∫–∞ –º–∞—Ä–∂–∏",
          "description": "–¢—Ä–µ–Ω–¥ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ –¥–Ω—è–º",
          "icon": "activity",
          "action": "cfo.chart_margin",
          "enabled": true,
          "badge": null
        },
        {
          "id": "chart_compare",
          "title": "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤",
          "description": "–¢–µ–∫—É—â–∏–π vs –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø–µ—Ä–∏–æ–¥",
          "icon": "git-compare-arrows",
          "action": "cfo.chart_compare",
          "enabled": true,
          "badge": null
        }
      ]
    },
    {
      "id": "warehouse",
      "title": "–°–∫–ª–∞–¥ –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∞",
      "banners": [
        {
          "id": "stock_balance",
          "title": "–û—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö",
          "description": "–¢–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ –ø–æ —Å–∫–ª–∞–¥–∞–º –∏ SKU",
          "icon": "package",
          "action": "cfo.stock_balance",
          "enabled": true,
          "badge": null
        },
        {
          "id": "shipments",
          "title": "–û—Ç–≥—Ä—É–∑–∫–∏ –Ω–∞ –ú–ü",
          "description": "–†–µ–µ—Å—Ç—Ä –æ—Ç–≥—Ä—É–∑–æ–∫ –∑–∞ –ø–µ—Ä–∏–æ–¥",
          "icon": "truck",
          "action": "cfo.shipments",
          "enabled": true,
          "badge": null
        },
        {
          "id": "returns",
          "title": "–í–æ–∑–≤—Ä–∞—Ç—ã",
          "description": "–ê–Ω–∞–ª–∏–∑ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ –æ—Ç –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤",
          "icon": "undo-2",
          "action": "cfo.returns",
          "enabled": true,
          "badge": null
        },
        {
          "id": "inventory_value",
          "title": "–û—Ü–µ–Ω–∫–∞ –∑–∞–ø–∞—Å–æ–≤",
          "description": "–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö",
          "icon": "warehouse",
          "action": "cfo.inventory_value",
          "enabled": true,
          "badge": null
        }
      ]
    },
    {
      "id": "cost",
      "title": "–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å",
      "banners": [
        {
          "id": "cost_by_sku",
          "title": "–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ SKU",
          "description": "–ê–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –∏–∑ 1–°",
          "icon": "calculator",
          "action": "cfo.cost_by_sku",
          "enabled": true,
          "badge": null
        },
        {
          "id": "supplier_prices",
          "title": "–¶–µ–Ω—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤",
          "description": "–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–∞–π—Å-–ª–∏—Å—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤",
          "icon": "receipt",
          "action": "cfo.supplier_prices",
          "enabled": true,
          "badge": null
        },
        {
          "id": "cost_dynamics",
          "title": "–î–∏–Ω–∞–º–∏–∫–∞ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏",
          "description": "–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤–æ –≤—Ä–µ–º–µ–Ω–∏",
          "icon": "chart-line",
          "action": "cfo.cost_dynamics",
          "enabled": true,
          "badge": null
        }
      ]
    },
    {
      "id": "ai",
      "title": "AI-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞",
      "banners": [
        {
          "id": "ai_digest",
          "title": "AI-–¥–∞–π–¥–∂–µ—Å—Ç –∑–∞ –Ω–µ–¥–µ–ª—é",
          "description": "–í—ã–≤–æ–¥—ã, –ø—Ä–æ–±–ª–µ–º—ã, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏",
          "icon": "sparkles",
          "action": "cfo.ai_digest",
          "enabled": true,
          "badge": "AI"
        },
        {
          "id": "ai_chat",
          "title": "–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å CFO",
          "description": "–°–≤–æ–±–æ–¥–Ω—ã–π –¥–∏–∞–ª–æ–≥ —Å –ò–ò-–∞–Ω–∞–ª–∏—Ç–∏–∫–æ–º",
          "icon": "message-square",
          "action": "cfo.ai_chat",
          "enabled": true,
          "badge": null,
          "action_type": "chat"
        }
      ]
    }
  ]
}
```

### 4.4.3 –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ Launcher

–î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ KPI-—à–∞–ø–∫–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π JSON-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CFO —Ä–∞—Å—à–∏—Ä—è–µ—Ç –±–∞–∑–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç Launcher (Core 3.1):

| –ü–æ–ª–µ | –¢–∏–ø | –ë–∞–∑–æ–≤—ã–π Launcher | CFO Extension |
|------|-----|:----------------:|:-------------:|
| \`module\` | string | ‚úÖ | ‚úÖ |
| \`banners[]\` | array | ‚úÖ (–ø–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫) | ‚Äî |
| \`categories[]\` | array | ‚Äî | ‚úÖ (–≥—Ä—É–ø–ø—ã –±–∞–Ω–Ω–µ—Ä–æ–≤) |
| \`kpi_endpoint\` | string | ‚Äî | ‚úÖ |
| \`banners[].min_role\` | string | ‚Äî | ‚úÖ |
| \`banners[].action_type\` | string | ‚Äî | ‚úÖ (\`direct\` / \`chat\` / \`redirect\`) |

Launcher API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç –ø–æ –Ω–∞–ª–∏—á–∏—é –ø–æ–ª—è \`categories\`: –µ—Å–ª–∏ –µ—Å—Ç—å ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–µ—Ç–∫—É, –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å).

---

## 4.5 –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

–°—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã **shadcn/ui Charts** –Ω–∞ –±–∞–∑–µ **Recharts** –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ç—Ä–µ–Ω–¥–æ–≤. –°—Ç–∏–ª–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —á–µ—Ä–µ–∑ CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ \`--chart-1\` ... \`--chart-5\` –∏–∑ \`shadcn-variables.css\`.

### 4.5.1 –¢–∏–ø—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤

| –¢–∏–ø | shadcn/ui Component | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|-----|---------------------|------------|
| Area Chart | \`AreaChart\` | –î–∏–Ω–∞–º–∏–∫–∞ –≤—ã—Ä—É—á–∫–∏, –ø—Ä–∏–±—ã–ª–∏ |
| Bar Chart | \`BarChart\` | P&L –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ú–ü |
| Stacked Bar | \`BarChart stacked\` | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ |
| Line Chart | \`LineChart\` | –¢—Ä–µ–Ω–¥ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ |
| Pie / Donut | \`PieChart\` | –î–æ–ª—è –ú–ü –≤ –≤—ã—Ä—É—á–∫–µ, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ABC |
| Radial Chart | \`RadialChart\` | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ (v2.0) |

### 4.5.2 –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤

**–î–∏–Ω–∞–º–∏–∫–∞ –≤—ã—Ä—É—á–∫–∏ (Area Chart)**

Executor: \`cfo.chart_revenue\`

```json
{
  "chart_type": "area",
  "title": "–î–∏–Ω–∞–º–∏–∫–∞ –≤—ã—Ä—É—á–∫–∏",
  "period": "30d",
  "x_key": "date",
  "series": [
    {"key": "revenue", "label": "–í—ã—Ä—É—á–∫–∞", "color": "var(--chart-1)"},
    {"key": "profit", "label": "–ü—Ä–∏–±—ã–ª—å", "color": "var(--chart-2)"}
  ],
  "data": [
    {"date": "2026-01-15", "revenue": 750000, "profit": 320000},
    {"date": "2026-01-16", "revenue": 680000, "profit": 290000}
  ]
}
```

**P&L –ø–æ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º (Bar Chart)**

Executor: \`cfo.pnl_marketplace\`

```json
{
  "chart_type": "bar",
  "title": "P&L –ø–æ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º",
  "x_key": "marketplace",
  "series": [
    {"key": "revenue", "label": "–í—ã—Ä—É—á–∫–∞", "color": "var(--chart-1)"},
    {"key": "expenses", "label": "–†–∞—Å—Ö–æ–¥—ã", "color": "var(--chart-5)"},
    {"key": "profit", "label": "–ü—Ä–∏–±—ã–ª—å", "color": "var(--chart-2)"}
  ],
  "data": [
    {"marketplace": "Wildberries", "revenue": 3500000, "expenses": 1925000, "profit": 1575000},
    {"marketplace": "Ozon", "revenue": 1200000, "expenses": 780000, "profit": 420000},
    {"marketplace": "–Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç", "revenue": 550000, "expenses": 308000, "profit": 242000}
  ]
}
```

**–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ABC (Pie Chart)**

Executor: \`cfo.abc_analysis\`

```json
{
  "chart_type": "pie",
  "title": "–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏ –ø–æ ABC",
  "data": [
    {"class": "A", "value": 7200000, "count": 47, "fill": "var(--abc-a)"},
    {"class": "B", "value": 1350000, "count": 89, "fill": "var(--abc-b)"},
    {"class": "C", "value": 450000, "count": 156, "fill": "var(--abc-c)"},
    {"class": "D", "value": -180000, "count": 23, "fill": "var(--abc-d)"}
  ]
}
```

**–î–∏–Ω–∞–º–∏–∫–∞ –º–∞—Ä–∂–∏ (Line Chart)**

Executor: \`cfo.chart_margin\`

```json
{
  "chart_type": "line",
  "title": "–¢—Ä–µ–Ω–¥ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏",
  "x_key": "date",
  "y_suffix": "%",
  "reference_line": {"value": 40, "label": "–¶–µ–ª–µ–≤–∞—è –º–∞—Ä–∂–∞"},
  "series": [
    {"key": "margin_wb", "label": "Wildberries", "color": "#CB11AB"},
    {"key": "margin_ozon", "label": "Ozon", "color": "#005BFF"},
    {"key": "margin_ym", "label": "–Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç", "color": "#FFCC00"}
  ],
  "data": [
    {"date": "2026-01-15", "margin_wb": 45.2, "margin_ozon": 38.1, "margin_ym": 41.5}
  ]
}
```

### 4.5.3 –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | CSS Variable | –¶–≤–µ—Ç |
|------------|-------------|------|
| –°–µ—Ä–∏—è 1 (–æ—Å–Ω–æ–≤–Ω–∞—è) | \`--chart-1\` | –°–∏–Ω–∏–π |
| –°–µ—Ä–∏—è 2 (–ø—Ä–∏–±—ã–ª—å) | \`--chart-2\` | –ó–µ–ª—ë–Ω—ã–π |
| –°–µ—Ä–∏—è 3 (–Ω–µ–π—Ç—Ä–∞–ª) | \`--chart-3\` | –°–µ—Ä—ã–π |
| –°–µ—Ä–∏—è 4 (–∞–∫—Ü–µ–Ω—Ç) | \`--chart-4\` | –ñ—ë–ª—Ç—ã–π |
| –°–µ—Ä–∏—è 5 (—Ä–∞—Å—Ö–æ–¥—ã) | \`--chart-5\` | –ö—Ä–∞—Å–Ω—ã–π |
| Wildberries | \`--mp-wb\` | #CB11AB |
| Ozon | \`--mp-ozon\` | #005BFF |
| –Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç | \`--mp-ym\` | #FFCC00 |
| ABC A | \`--abc-a\` | –ó–µ–ª—ë–Ω—ã–π |
| ABC B | \`--abc-b\` | –°–∏–Ω–∏–π |
| ABC C | \`--abc-c\` | –ñ—ë–ª—Ç—ã–π |
| ABC D | \`--abc-d\` | –ö—Ä–∞—Å–Ω—ã–π |

---

## 4.6 Result Page

–ü—Ä–∏ –∫–ª–∏–∫–µ –ø–æ –±–∞–Ω–Ω–µ—Ä—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ \`/apps/cfo/result\`. –§–æ—Ä–º–∞—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –æ—Ç—á—ë—Ç–∞.

### 4.6.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Result Page

–ö–∞–∂–¥–∞—è Result Page —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –±–ª–æ–∫–∏ (—Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑): –Ω–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–∑–∞–¥ –∏ breadcrumb, –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –ø–µ—Ä–∏–æ–¥–∞, –≥—Ä–∞—Ñ–∏–∫ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ), —Ç–∞–±–ª–∏—Ü–∞ –¥–∞–Ω–Ω—ã—Ö, —Å–≤–æ–¥–∫–∞ (–∏—Ç–æ–≥–æ), –∫–Ω–æ–ø–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ—Ç—á—ë—Ç–æ–≤ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞.

### 4.6.2 –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –ø–µ—Ä–∏–æ–¥–∞

–í—Å–µ –æ—Ç—á—ë—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞ –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞ –¥–∞—à–±–æ—Ä–¥:

| –ö–Ω–æ–ø–∫–∞ | –ü–µ—Ä–∏–æ–¥ | API-–ø–∞—Ä–∞–º–µ—Ç—Ä |
|--------|--------|-------------|
| –ù–µ–¥ | –ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π | \`period=week\` |
| –ú–µ—Å | –ü–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π | \`period=month\` |
| –ö–≤ | –ü–æ—Å–ª–µ–¥–Ω–∏–µ 90 –¥–Ω–µ–π | \`period=quarter\` |

–ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –ø–µ—Ä–∏–æ–¥–∞ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ç–æ—Ç –∂–µ executor —Å –Ω–æ–≤—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º.

### 4.6.3 –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –º–µ–∂–¥—É –æ—Ç—á—ë—Ç–∞–º–∏

–ù–∞ –∫–∞–∂–¥–æ–π Result Page –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–≤—è–∑–∞–Ω–Ω—ã–º –æ—Ç—á—ë—Ç–∞–º:

| –¢–µ–∫—É—â–∏–π –æ—Ç—á—ë—Ç | –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ |
|---------------|------------------|
| P&L –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º | –ü–æ –±—Ä–µ–Ω–¥–∞–º, –ü–æ –ú–ü, ABC-–∞–Ω–∞–ª–∏–∑, Excel |
| P&L –ø–æ –±—Ä–µ–Ω–¥–∞–º | –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –ü–æ –ú–ü, –ü–æ SKU*, Excel |
| P&L –ø–æ –ú–ü | –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –ü–æ –±—Ä–µ–Ω–¥–∞–º, Excel |
| P&L –ø–æ SKU | –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, ABC-–∞–Ω–∞–ª–∏–∑, –£–±—ã—Ç–æ—á–Ω—ã–µ, Excel |
| ABC-–∞–Ω–∞–ª–∏–∑ | –£–±—ã—Ç–æ—á–Ω—ã–µ SKU, –¢–æ–ø –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö, AI-–¥–∞–π–¥–∂–µ—Å—Ç, Excel |
| –£–±—ã—Ç–æ—á–Ω—ã–µ SKU | AI-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, ABC-–∞–Ω–∞–ª–∏–∑, Excel |
| –û—Å—Ç–∞—Ç–∫–∏ | –û—Ç–≥—Ä—É–∑–∫–∏, –û—Ü–µ–Ω–∫–∞ –∑–∞–ø–∞—Å–æ–≤ |
| –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å | –¶–µ–Ω—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤, –î–∏–Ω–∞–º–∏–∫–∞ |

### 4.6.4 –≠–∫—Å–ø–æ—Ä—Ç

–í—Å–µ —Ç–∞–±–ª–∏—á–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —ç–∫—Å–ø–æ—Ä—Ç:

| –§–æ—Ä–º–∞—Ç | –ö–Ω–æ–ø–∫–∞ | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|--------|--------|------------|
| Excel | üì• Excel | \`cfo.export\` ‚Üí \`.xlsx\` —Ñ–∞–π–ª |
| PDF | üìÑ PDF | \`cfo.export\` ‚Üí \`.pdf\` —Ñ–∞–π–ª |
| –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å | üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å | Clipboard API ‚Üí markdown-—Ç–∞–±–ª–∏—Ü–∞ |

---

## 4.7 –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ 1–°

–ú–æ–¥—É–ª—å CFO v1.1 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ **13 —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã–≥—Ä—É–∑–æ–∫** 1–°:–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è 2 (—Å–º. \`brain_1c_ka2_exports_registry_v1_1\`). –ù–∏–∂–µ ‚Äî –º–∞–ø–ø–∏–Ω–≥ –≤—ã–≥—Ä—É–∑–æ–∫ –Ω–∞ –±–∞–Ω–Ω–µ—Ä—ã –¥–∞—à–±–æ—Ä–¥–∞.

### 4.7.1 –ú–∞–ø–ø–∏–Ω–≥ 1–° ‚Üí CFO Dashboard

| –í—ã–≥—Ä—É–∑–∫–∞ 1–° | –ö–æ–¥ —Ñ–∞–π–ª–∞ | –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å | –ë–∞–Ω–Ω–µ—Ä—ã CFO |
|-------------|-----------|---------------|-------------|
| –û—Å—Ç–∞—Ç–∫–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å | \`stock_balance\` | –ï–∂–µ–¥–Ω–µ–≤–Ω–æ | –û—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö, KPI "–û—Å—Ç–∞—Ç–∫–∏" |
| –í–µ–¥–æ–º–æ—Å—Ç—å –ø–æ —Ç–æ–≤–∞—Ä–∞–º | \`stock_movement\` | –ï–∂–µ–¥–Ω–µ–≤–Ω–æ | (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ä–∞—Å—á—ë—Ç—ã) |
| –†–µ–µ—Å—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–æ–¥–∞–∂–∏ | \`orders_shipped\` | –ï–∂–µ–¥–Ω–µ–≤–Ω–æ | –û—Ç–≥—Ä—É–∑–∫–∏ –Ω–∞ –ú–ü, KPI "–û—Ç–≥—Ä—É–∑–∫–∏" |
| –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤ | \`cost_prices\` | –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ | –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ SKU, P&L —Ä–∞—Å—á—ë—Ç—ã |
| –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ | \`product_catalog\` | –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ | (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–æ–≤–∞—Ä–æ–≤) |
| –¶–µ–Ω—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ | \`suppliers_prices\` | –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ | –¶–µ–Ω—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ |
| –ê–Ω–∞–ª–∏–∑ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ | \`returns_register\` | –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ | –í–æ–∑–≤—Ä–∞—Ç—ã |
| –í–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å | \`financial_summary\` | –ï–∂–µ–º–µ—Å—è—á–Ω–æ | P&L –∫–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤ |
| –û—Å—Ç–∞—Ç–∫–∏ (—Å—Ä–µ–∑) | \`inventory_valuation\` | –ï–∂–µ–º–µ—Å—è—á–Ω–æ | –û—Ü–µ–Ω–∫–∞ –∑–∞–ø–∞—Å–æ–≤ |
| –î–æ–≥–æ–≤–æ—Ä—ã | \`contracts_register\` | –ï–∂–µ–º–µ—Å—è—á–Ω–æ | (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫) |
| –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã | \`counterparties\` | –ï–∂–µ–º–µ—Å—è—á–Ω–æ | (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫) |
| –ö–≤–∞—Ä—Ç–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å | \`quarter_pnl\` | –ï–∂–µ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤ |
| –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è | \`quarter_inventory_audit\` | –ï–∂–µ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ | (–∫–æ–Ω—Ç—Ä–æ–ª—å) |

### 4.7.2 ETL-–ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è –Ω–æ–≤—ã—Ö –≤—ã–≥—Ä—É–∑–æ–∫

CSV-—Ñ–∞–π–ª—ã –ø–æ—Å—Ç—É–ø–∞—é—Ç –≤ \`/data/inbox/cfo/\` –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ ETL (ADOLF Core). –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –¥–∞–Ω–Ω—ã—Ö 1–° –æ–ø–∏—Å–∞–Ω—ã –≤ [–†–∞–∑–¥–µ–ª 5: Database](/cfo/adolf_cfo_5_database).

```mermaid
flowchart LR
    subgraph ONE_C["1–°:–ö–ê 2"]
        EXPORT["–†–µ–≥–ª–∞–º–µ–Ω—Ç–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ"]
    end

    subgraph FS["–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞"]
        INBOX["–°–µ—Ç–µ–≤–∞—è –ø–∞–ø–∫–∞ 1c_export"]
    end

    subgraph ETL["ADOLF Core ETL"]
        WATCHER_FS["File Watcher"]
        PARSER["CSV Parser"]
        LOADER["DB Loader"]
    end

    subgraph DB["PostgreSQL"]
        STOCK["cfo_stock_balance"]
        SHIP["cfo_shipments"]
        RET["cfo_returns"]
        COST["cfo_cost_prices"]
    end

    EXPORT -->|"CSV"| INBOX
    INBOX -->|"inotify"| WATCHER_FS
    WATCHER_FS --> PARSER
    PARSER --> LOADER
    LOADER --> STOCK
    LOADER --> SHIP
    LOADER --> RET
    LOADER --> COST
```

---

## 4.8 Pipeline (—á–∞—Ç —Å –ò–ò)

–î–ª—è —Å–≤–æ–±–æ–¥–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–º—É –ò–ò-–∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Pipeline \`@Adolf_CFO\` –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ Open WebUI. –≠—Ç–æ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ dashboard-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É, –∞ –Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.

### 4.8.1 –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω Open WebUI (—ç–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è), –≤—ã–±–∏—Ä–∞–µ—Ç \`@Adolf_CFO\` –∏ –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ.

### 4.8.2 –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç

```python
CFO_SYSTEM_PROMPT = """
–¢—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã ADOLF –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ –û–•–ê–ù–ê –ú–ê–†–ö–ï–¢.

–¢–≤–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
1. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ P&L –æ—Ç—á—ë—Ç–æ–≤ (SKU, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –±—Ä–µ–Ω–¥—ã, –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã)
2. ABC-–∞–Ω–∞–ª–∏–∑ —Ç–æ–≤–∞—Ä–Ω–æ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è
3. –í—ã—è–≤–ª–µ–Ω–∏–µ —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
4. AI-–∏–Ω—Å–∞–π—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
5. –ö–∞—Å—Ç–æ–º–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É
6. –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏–∑ 1–° (–æ—Å—Ç–∞—Ç–∫–∏, –æ—Ç–≥—Ä—É–∑–∫–∏, –≤–æ–∑–≤—Ä–∞—Ç—ã, —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å)

–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã: Wildberries (wb), Ozon (ozon), –Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç (ym)
–ë—Ä–µ–Ω–¥—ã: –û—Ö–∞–Ω–∞ –ú–∞—Ä–∫–µ—Ç (ohana_market), –û—Ö–∞–Ω–∞ –ö–∏–¥—Å (ohana_kids)

–ü—Ä–∞–≤–∏–ª–∞:
1. –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π –ø–µ—Ä–∏–æ–¥ –¥–∞–Ω–Ω—ã—Ö
2. –ß–∏—Å–ª–∞ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏ —Ç—ã—Å—è—á (1 234 567 ‚ÇΩ)
3. –ü—Ä–æ—Ü–µ–Ω—Ç—ã –¥–æ 1 –∑–Ω–∞–∫–∞ (15.3%)
4. –î–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –ø—Ä–µ–¥–ª–∞–≥–∞–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
5. –î–ª—è —Ç–∞–±–ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π markdown-—Ç–∞–±–ª–∏—Ü—ã

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –æ—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ CFO.
–ß–∞—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —É–≥–ª—É–±–ª—ë–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

–¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
- –†–æ–ª—å: {user_role}
- –ë—Ä–µ–Ω–¥: {user_brand}

{role_restrictions}
"""
```

### 4.8.3 Tools (Function Calling)

–†–µ–µ—Å—Ç—Ä Tools –æ—Å—Ç–∞—ë—Ç—Å—è –æ–±—â–∏–º –¥–ª—è Pipeline –∏ Launcher executors. –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –±–∞–∑–æ–≤—ã—Ö Tools –∏ –∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω—ã –≤ v1.0 –¥–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞. –ù–∏–∂–µ ‚Äî —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ Tools, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ v1.1.

**–ù–æ–≤—ã–µ Tools v1.1:**

| Tool | –û–ø–∏—Å–∞–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ 1–° |
|------|----------|-------------|
| \`cfo_stock_balance\` | –û—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö | \`stock_balance\` |
| \`cfo_shipments\` | –û—Ç–≥—Ä—É–∑–∫–∏ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã | \`orders_shipped\` |
| \`cfo_returns\` | –ê–Ω–∞–ª–∏–∑ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ | \`returns_register\` |
| \`cfo_inventory_value\` | –û—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∑–∞–ø–∞—Å–æ–≤ | \`inventory_valuation\` |
| \`cfo_supplier_prices\` | –¶–µ–Ω—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ | \`suppliers_prices\` |
| \`cfo_cost_dynamics\` | –î–∏–Ω–∞–º–∏–∫–∞ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ | \`cost_prices\` (–∏—Å—Ç–æ—Ä–∏—è) |
| \`cfo_top_profitable\` | –¢–æ–ø –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö SKU | \`cfo_pnl_daily\` |
| \`cfo_chart_revenue\` | –î–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ –≤—ã—Ä—É—á–∫–∏ | \`cfo_pnl_daily\` |
| \`cfo_chart_margin\` | –î–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ –º–∞—Ä–∂–∏ | \`cfo_pnl_daily\` |
| \`cfo_chart_compare\` | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ | \`cfo_pnl_aggregated\` |

**–û–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö Tools –¥–ª—è LLM:**

```json
[
  {
    "name": "cfo_stock_balance",
    "description": "–û—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö. –î–∞–Ω–Ω—ã–µ –∏–∑ 1–° (–µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è –≤—ã–≥—Ä—É–∑–∫–∞).",
    "parameters": {
      "type": "object",
      "properties": {
        "warehouse_code": {
          "type": "string",
          "description": "–ö–æ–¥ —Å–∫–ª–∞–¥–∞ (all –¥–ª—è –≤—Å–µ—Ö)",
          "default": "all"
        },
        "sku": {
          "type": "string",
          "description": "–§–∏–ª—å—Ç—Ä –ø–æ –∞—Ä—Ç–∏–∫—É–ª—É"
        },
        "limit": {"type": "integer", "default": 50}
      }
    }
  },
  {
    "name": "cfo_shipments",
    "description": "–û—Ç–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã. –î–∞–Ω–Ω—ã–µ –∏–∑ 1–°.",
    "parameters": {
      "type": "object",
      "properties": {
        "period": {"type": "string", "default": "week"},
        "marketplace": {
          "type": "string",
          "enum": ["all", "Wildberries", "Ozon", "–Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç"],
          "default": "all"
        }
      }
    }
  },
  {
    "name": "cfo_returns",
    "description": "–ê–Ω–∞–ª–∏–∑ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ –æ—Ç –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤. –î–∞–Ω–Ω—ã–µ –∏–∑ 1–° (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ).",
    "parameters": {
      "type": "object",
      "properties": {
        "period": {"type": "string", "default": "week"},
        "marketplace": {
          "type": "string",
          "enum": ["all", "Wildberries", "Ozon", "–Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç"],
          "default": "all"
        },
        "group_by": {
          "type": "string",
          "enum": ["sku", "marketplace", "date"],
          "default": "sku"
        }
      }
    }
  },
  {
    "name": "cfo_supplier_prices",
    "description": "–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤. –î–∞–Ω–Ω—ã–µ –∏–∑ 1–° (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ).",
    "parameters": {
      "type": "object",
      "properties": {
        "supplier_code": {"type": "string", "description": "–ö–æ–¥ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (all –¥–ª—è –≤—Å–µ—Ö)", "default": "all"},
        "sku": {"type": "string", "description": "–§–∏–ª—å—Ç—Ä –ø–æ –∞—Ä—Ç–∏–∫—É–ª—É"}
      }
    }
  },
  {
    "name": "cfo_cost_dynamics",
    "description": "–î–∏–Ω–∞–º–∏–∫–∞ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥.",
    "parameters": {
      "type": "object",
      "properties": {
        "sku": {"type": "string", "description": "–ê—Ä—Ç–∏–∫—É–ª (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"},
        "months": {"type": "integer", "default": 6, "description": "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—è—Ü–µ–≤"}
      },
      "required": ["sku"]
    }
  },
  {
    "name": "cfo_top_profitable",
    "description": "–¢–æ–ø –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö SKU.",
    "parameters": {
      "type": "object",
      "properties": {
        "period": {"type": "string", "default": "month"},
        "limit": {"type": "integer", "default": 20},
        "marketplace": {"type": "string", "enum": ["all", "wb", "ozon", "ym"], "default": "all"}
      }
    }
  }
]
```

---

## 4.9 Executors

–ö–∞–∂–¥—ã–π –±–∞–Ω–Ω–µ—Ä –¥–∞—à–±–æ—Ä–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π executor. –í—Å–µ executors —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ \`/executors/launcher/cfo.py\`.

### 4.9.1 –†–µ–µ—Å—Ç—Ä Executors

| Action | Executor Function | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç |
|--------|-------------------|------------|
| \`cfo.pnl_category\` | \`pnl_category()\` | –¢–∞–±–ª–∏—Ü–∞ + Bar Chart |
| \`cfo.pnl_brand\` | \`pnl_brand()\` | –¢–∞–±–ª–∏—Ü–∞ + Bar Chart |
| \`cfo.pnl_marketplace\` | \`pnl_marketplace()\` | –¢–∞–±–ª–∏—Ü–∞ + Bar Chart |
| \`cfo.pnl_sku\` | \`pnl_sku()\` | –¢–∞–±–ª–∏—Ü–∞ |
| \`cfo.pnl_consolidated\` | \`pnl_consolidated()\` | –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ + Area Chart |
| \`cfo.abc_analysis\` | \`abc_analysis()\` | –¢–∞–±–ª–∏—Ü–∞ + Pie Chart |
| \`cfo.loss_makers\` | \`loss_makers()\` | –¢–∞–±–ª–∏—Ü–∞ + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ |
| \`cfo.top_profitable\` | \`top_profitable()\` | –¢–∞–±–ª–∏—Ü–∞ |
| \`cfo.chart_revenue\` | \`chart_revenue()\` | Area Chart |
| \`cfo.chart_margin\` | \`chart_margin()\` | Line Chart |
| \`cfo.chart_compare\` | \`chart_compare()\` | Bar Chart (stacked) |
| \`cfo.stock_balance\` | \`stock_balance()\` | –¢–∞–±–ª–∏—Ü–∞ |
| \`cfo.shipments\` | \`shipments()\` | –¢–∞–±–ª–∏—Ü–∞ |
| \`cfo.returns\` | \`returns()\` | –¢–∞–±–ª–∏—Ü–∞ |
| \`cfo.inventory_value\` | \`inventory_value()\` | –¢–∞–±–ª–∏—Ü–∞ |
| \`cfo.cost_by_sku\` | \`cost_by_sku()\` | –¢–∞–±–ª–∏—Ü–∞ |
| \`cfo.supplier_prices\` | \`supplier_prices()\` | –¢–∞–±–ª–∏—Ü–∞ |
| \`cfo.cost_dynamics\` | \`cost_dynamics()\` | Line Chart |
| \`cfo.ai_digest\` | \`ai_digest()\` | Markdown (AI-—Ç–µ–∫—Å—Ç) |
| \`cfo.ai_chat\` | ‚Äî | Redirect ‚Üí Pipeline —á–∞—Ç |

### 4.9.2 –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ Executor

–í—Å–µ executors –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:

```json
{
  "success": true,
  "action": "cfo.pnl_category",
  "title": "P&L –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º",
  "subtitle": "07.02.2026 ‚Äî 13.02.2026",
  "components": [
    {
      "type": "chart",
      "chart_type": "bar",
      "data": {}
    },
    {
      "type": "table",
      "columns": ["–ö–∞—Ç–µ–≥–æ—Ä–∏—è", "–í—ã—Ä—É—á–∫–∞", "–°–µ–±–µ—Å—Ç.", "–†–∞—Å—Ö–æ–¥—ã –ú–ü", "–ü—Ä–∏–±—ã–ª—å", "–ú–∞—Ä–∂–∞"],
      "rows": [
        ["–ü–ª–∞—Ç—å—è", "2 450 000 ‚ÇΩ", "980 000 ‚ÇΩ", "367 500 ‚ÇΩ", "1 102 500 ‚ÇΩ", "45.0%"]
      ]
    },
    {
      "type": "summary",
      "items": [
        {"label": "–í—ã—Ä—É—á–∫–∞", "value": "4 570 000 ‚ÇΩ"},
        {"label": "–ü—Ä–∏–±—ã–ª—å", "value": "2 056 500 ‚ÇΩ"},
        {"label": "–ú–∞—Ä–∂–∞", "value": "45.0%"}
      ]
    }
  ],
  "actions": [
    {"label": "üè∑Ô∏è –ü–æ –±—Ä–µ–Ω–¥–∞–º", "action": "cfo.pnl_brand"},
    {"label": "üõí –ü–æ –ú–ü", "action": "cfo.pnl_marketplace"},
    {"label": "üì• Excel", "action": "cfo.export", "params": {"report_type": "pnl_category"}}
  ],
  "period_selector": true,
  "export_available": true
}
```

### 4.9.3 –ü—Ä–æ–º–ø—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

```
–ü—Ä–æ–º–ø—Ç –¥–ª—è Claude Code:

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª executors/launcher/cfo.py —Å async-—Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ 
action –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞ 4.9.1. –ö–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è:
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç user: dict (id, role, brand_id)
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç dict –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Ä–∞–∑–¥–µ–ª–∞ 4.9.2
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ä–≤–∏—Å—ã: pnl_service, abc_service, stock_service, 
  insight_service, export_service
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –ø–æ —Ä–æ–ª–∏ (min_role –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–∞–Ω–Ω–µ—Ä–∞)
- –î–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç data –≤ —Ñ–æ—Ä–º–∞—Ç–µ Recharts
- –î–ª—è —Ç–∞–±–ª–∏—Ü —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —á–∏—Å–ª–∞ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏ —Ç—ã—Å—è—á

–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: SQLAlchemy async, FastAPI, Pydantic.
–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞: —Å–º. adolf_cfo_3_ai_pipeline.md
–°—Ö–µ–º–∞ –ë–î: —Å–º. adolf_cfo_5_database.md
```

---

## 4.10 –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | Senior | Director | Admin |
|-----------|:------:|:--------:|:-----:|
| KPI Dashboard | ‚úÖ | ‚úÖ | ‚úÖ |
| P&L –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º | ‚úÖ | ‚úÖ | ‚úÖ |
| P&L –ø–æ –±—Ä–µ–Ω–¥–∞–º | ‚úÖ | ‚úÖ | ‚úÖ |
| P&L –ø–æ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º | ‚úÖ | ‚úÖ | ‚úÖ |
| P&L –ø–æ SKU | ‚ùå | ‚úÖ | ‚úÖ |
| –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π P&L | ‚ùå | ‚úÖ | ‚úÖ |
| ABC-–∞–Ω–∞–ª–∏–∑ | ‚úÖ | ‚úÖ | ‚úÖ |
| –£–±—ã—Ç–æ—á–Ω—ã–µ SKU | ‚úÖ | ‚úÖ | ‚úÖ |
| –¢–æ–ø –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö | ‚úÖ | ‚úÖ | ‚úÖ |
| –ì—Ä–∞—Ñ–∏–∫–∏ (–≤—Å–µ) | ‚úÖ | ‚úÖ | ‚úÖ |
| –°–∫–ª–∞–¥ –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∞ (–≤—Å–µ) | ‚úÖ | ‚úÖ | ‚úÖ |
| –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å (–≤—Å–µ) | ‚úÖ | ‚úÖ | ‚úÖ |
| AI-–¥–∞–π–¥–∂–µ—Å—Ç | ‚úÖ | ‚úÖ | ‚úÖ |
| –ß–∞—Ç @Adolf_CFO | ‚úÖ | ‚úÖ | ‚úÖ |
| –ö–∞—Å—Ç–æ–º–Ω—ã–µ –æ—Ç—á—ë—Ç—ã (—á–∞—Ç) | ‚ùå | ‚úÖ | ‚úÖ |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—Ä–æ–≥–æ–≤ | ‚ùå | ‚ùå | ‚úÖ |

–ë–∞–Ω–Ω–µ—Ä—ã —Å \`min_role: "director"\` –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–ª—è Senior. –î–æ—Å—Ç—É–ø –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (—Å–∫—Ä—ã—Ç–∏–µ –±–∞–Ω–Ω–µ—Ä–∞), –∏ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ (executor –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É 403).

---

## 4.11 –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

| –î–æ–∫—É–º–µ–Ω—Ç | –°–≤—è–∑—å |
|----------|-------|
| [Core 3.1: Launcher](/core/adolf_core_3_1_launcher) | –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–Ω–Ω–µ—Ä–Ω–æ–≥–æ –ø–æ–¥–º–µ–Ω—é |
| [CFO 3: AI Pipeline](/cfo/adolf_cfo_3_ai_pipeline) | –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–æ–≤ P&L –∏ ABC |
| [CFO 5: Database](/cfo/adolf_cfo_5_database) | –°—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü \`cfo_*\` |
| [CFO 7: Celery](/cfo/adolf_cfo_7_celery) | –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö |
| [UI Reference: CFO](/ui_reference/cfo/) | –í–∏–∑—É–∞–ª—å–Ω—ã–π reference –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ |
| [UI Reference: shadcn](/ui_reference/base/) | CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ design tokens |
| \`brain_1c_ka2_exports_registry_v1_1\` | –†–µ–≥–ª–∞–º–µ–Ω—Ç –≤—ã–≥—Ä—É–∑–æ–∫ –∏–∑ 1–° |

---

**–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** –§–µ–≤—Ä–∞–ª—å 2026  
**–í–µ—Ä—Å–∏—è:** 1.1  
**–°—Ç–∞—Ç—É—Å:** –£—Ç–≤–µ—Ä–∂–¥—ë–Ω  
**–ó–∞–º–µ–Ω—è–µ—Ç:** v1.0 (–Ø–Ω–≤–∞—Ä—å 2026)
